---
title: 'Checkpoint Chronicle - December 2023'
date: "2023-12-13T00:00:00+00:00"
draft: false
credit: "https://bsky.app/profile/rmoff.net"
categories:
- Checkpoint Chronicle
image: "/images/2023/12/checkpoint_chronicle_december2023.jpg"
---

NOTE: This post originally appeared on the link:https://www.decodable.co/blog/checkpoint-chronicle-december-2023[Decodable blog].

Welcome to the _Checkpoint Chronicle_, a monthly roundup of interesting stuff in the data and streaming space.
Your hosts and esteemed curators of said content are  link:https://twitter.com/gunnarmorling?lang=en[Gunnar Morling]  and  link:https://twitter.com/rmoff/[Robin Moffatt] ‚Äîfeel free to send our way any choice nuggets that you think we should feature in future editions.

<!--more-->

=== Stream Processing, Streaming SQL, and Streaming Databases
* link:https://speakerdeck.com/jark/flink-sql-the-challenges-of-implementing-a-streaming-sql-engine?slide=21[Flink SQL: the Challenges of Implementing a Streaming SQL Engine]  As the Flink SQL Team Leader at Alibaba, Jark Wu is well placed to discuss the Challenges of Implementing a streaming SQL engine. These slides from his talk at Flink Forward 2023 cover some useful detail, including handling late data, change log events, and more.
* link:https://www.responsive.dev/blog/guide-to-kafka-streams-rebalancing[Defense Against the Dark Art of Rebalancing in Kafka Streams]  Responsive continue their top-notch blog output with this fantastic article from Sophie Blee-Goldman going into the real nuts and bolts of Kafka Streams rebalancing, how it works, the problems it can cause‚Äîand what to do about it when it does. link:https://www.alibabacloud.com/blog/how-to-write-simple-and-efficient-flink-sql_600148[]
* link:https://www.alibabacloud.com/blog/how-to-write-simple-and-efficient-flink-sql_600148[How to Write Simple and Efficient Flink SQL]  A useful post from Xiaolin He‚Äîone of the committers to Apache Flink and PMC member‚Äîin which they summarise their talk from Flink Forward Asia 2022.
*  link:https://aws.amazon.com/blogs/big-data/implement-apache-flink-real-time-data-enrichment-patterns/[Apache Flink data enrichment patterns]  An interesting study of the performance and other characteristics of three enrichment patterns (Synchronous, Asynchronous, and Synchronous Cached) in Apache Flink, by AWS' Luis Morales and Lorenzo Nicora.
* link:https://opencredo.com/blogs/lets-flink-on-eks-data-lake-primer/[Let‚Äôs Flink on EKS: Data Lake Primer]  An introduction to running Apache Flink on EKS as part of an Apache Iceberg-based data lake.
* link:https://medium.com/event-driven-utopia/stream-processing-basics-stateless-operations-c6e86a8296e1?sk=acafb7a32d798bbc67a34d35694894b2[Stream Processing Basics ‚Äî Stateless Operations]  A useful technology-agnostic primer on the types of stateless operations in stream processing, from Redpanda's Dunith Danushka.
* link:https://www.motifanalytics.com/blog/a-beginners-guide-to-sequence-analytics-in-sql[A Beginner's Guide to Sequence Analytics in SQL]  A really nice introduction to doing time-based analytics in SQL, such as user session analysis. Starts with cleaning the data up with some simple `CASE` statements and gets progressively more complex, getting onto some nice use of `LAG` functions to pivot data.
* Yaroslav Tkachenko returns to the newsletter for a second month running with  link:https://streamingdata.substack.com/p/considerations-for-data-stream-materialization[this article that discusses Considerations for Data Stream Materialization]  framing it in the context of being able to choose only two from the following: Cost vs Performance vs Reusability. link:https://www.decodable.co/blog/getting-started-with-pyflink-on-kubernetes[]
* link:https://www.decodable.co/blog/getting-started-with-pyflink-on-kubernetes[Getting Started With PyFlink on Kubernetes]  An excellent hands-on guide from Gunnar running you through the steps for creating your first PyFlink job and running it on Kubernetes.
* As Confluent increases their focus on Apache Flink, it's interesting to see how they now position both Kafka Streams and ksqlDB. Are one or both for the chop, or all three live in glorious harmony? In  link:https://www.kai-waehner.de/blog/2023/01/23/apache-kafka-and-apache-flink-a-match-made-in-heaven/[this article on his own blog] , Confluent's Kai Waehner discusses how he sees KStreams and Flink co-existing.


=== Event Streaming
* Two lists in the ‚Äúawesome-*‚Äù canon this month: +
‚Ä¢  link:https://github.com/responsivedev/awesome-kafka-streams[awesome-kafka-streams]  an excellent list, recently published, of companies using Kafka Streams in production.
+
‚Ä¢  link:https://github.com/bytewax/awesome-public-real-time-datasets[awesome-public-real-time-datasets]  A nice collection of realtime datasets, with plenty of free ones and some paid.

* link:https://www.confluent.io/blog/how-to-send-messages-with-librdkafka/[How To Produce Messages With librdkafka]  A nice write up from Confluent‚Äôs Jakub Korab on the internals of librdkafka (which underlies many of the non-Java clients for Apache Kafka).
* link:https://developers.redhat.com/articles/2023/11/22/getting-started-tiered-storage-apache-kafka[Getting started with tiered storage in Apache Kafka]  An interesting guide from Kafka's PMC chair, Mickael Maison, on how to use the new tiered storage feature (currently in early access, and not recommended for production use yet).
* link:https://www.warpstream.com/blog/unlocking-idempotency-with-retroactive-tombstones[Unlocking Idempotency with Retroactive Tombstones]  WarpStream is a new project that offers a Kafka-compatible API with storage of data directly on S3. This blog details how they implement an idempotent producer, which helps them get one step closer to Exactly Once Semantics as offered in Kafka itself.


=== Change Data Capture
* link:https://www.decodable.co/blog/change-data-capture-breaks-encapsulation-does-it-though[‚ÄúChange Data Capture Breaks Encapsulation‚Äù. Does it, though?]  Gunnar examines what data encapsulation means in the context of CDC, whether it actually breaks it‚Äîand how data contracts have an important role to play.
* The  link:https://debezium.io/documentation/reference/stable/connectors/jdbc.html[Debezium connector for JDBC]  was added earlier this year in the 2.2 release but many people are still unaware of it. It adds a Kafka Connect _sink_ capability to what had to-date only dealt with _sources_. As you‚Äôd expect it‚Äôs fully aware of the data structures that Debezium uses, making it easier to stream from one database to another. It‚Äôs also Apache 2.0 licensed.
* link:https://www.morling.dev/blog/can-debezium-lose-events/[Can Debezium Lose Events?]  Not unless you screw things up on the source database side! Gunnar provides a useful explainer on what could, in theory, lead to events being lost‚Äîand how to avoid it.


=== Data Platforms and Architecture
* link:https://blog.schmizz.net/disaggregated-wal[The disaggregated write-ahead log]  An interesting thought experiment from Shikhar Bhushan in which they describe S2 (the Stream Store)‚Äîthe equivalent of S3 for logs. This would be a truly serverless API, single-digit-milliseconds to tail and append, for a practically unlimited number of them with bottomless storage and elastic throughput.
* link:https://materializedview.io/p/durable-execution-justifying-the-bubble[Durable Execution: Justifying the Bubble]  A useful roundup from Chris Riccomini on what he describes as ‚Äúworkflow orchestration with transactional state management‚Äù, covering technologies including Temporal, Restate, and more.


=== Data Ecosystem
* link:https://www.youtube.com/watch?v=jMFMEk8jFu8[Netflix‚Äôs journey to an Apache Iceberg‚Äìonly data lake]  Fascinating talk from AWS re:Invent 2023 in which Ashwin Kayyoor and Rakesh Veeramacheneni discuss at the tooling that Netflix have built around Apache Iceberg and their project to migrate over a million Apache Hive tables and 300PB of data to Apache Iceberg, yielding multiple benefits including 25% cost reduction.
* link:https://rocksdb.org/blog/2023/11/06/java-jni-benchmarks.html[RockDB - Java API Performance Improvements]  Details of some performance analysis work done on using Java with RocksDB, including recommendations for optimisations when using the API


=== FLIP Foyer
link:https://cwiki.apache.org/confluence/display/Flink/Flink+Improvement+Proposals[Flink Improvement Proposals] , or FLIP for short, are the process of the Flink community for discussing and working towards major changes in the project, such as new features, redesigns, deprecations, etc.
Here are some recent FLIPs worth keeping an eye on:

* link:https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=255071710[FLIP-319: Integrate with Kafka's Support for Proper 2PC Participation]  Based on Kafka‚Äôs work towards supporting two-phase commit transactions (KIP-939, see below), this FLIP aims to improve the Flink Kafka sink in regards to exactly-once guarantees (no more data loss in case of Kafka transaction timeouts) and maintainability (currently, the sink relies on Java reflection to adjust some parts of transaction handling in the Kafka client)
* link:https://cwiki.apache.org/confluence/display/FLINK/FLIP-356%3A+Support+Nested+Fields+Filter+Pushdown[FLIP-356: Support Nested Fields Filter Pushdown]  Performance improvements are always welcomed, and in this spirit this FLIP aims to allow Flink Table API sources to push down nested filter expressions such as `WHERE user.age < 30` to the underlying data source, reducing the amount of data which needs to be ingested into the Flink engine, only to filter out the data there link:https://cwiki.apache.org/confluence/display/FLINK/FLIP-385%3A+Add+OpenTelemetryTraceReporter+and+OpenTelemetryMetricReporter[]
* link:https://cwiki.apache.org/confluence/display/FLINK/FLIP-385%3A+Add+OpenTelemetryTraceReporter+and+OpenTelemetryMetricReporter[FLIP-385: Add OpenTelemetryTraceReporter and OpenTelemetryMetricReporter]  Seeking to improve Flink‚Äôs observability story, this FLIP suggests to add metrics and trace reporters using the OpenTelemetry standard link:https://lists.apache.org/thread/o7klnbsotmmql999bnwmdgo56b6kxx9l[]
* link:https://lists.apache.org/thread/o7klnbsotmmql999bnwmdgo56b6kxx9l[[PROPOSAL] Contribute Flink CDC Connectors project to Apache Flink]  While it‚Äôs not a formal FLIP yet, this proposal by Leonard Xu must not be missed. With most of its connectors being based on Debezium, Flink CDC plays a vital role for many real-time data integration use cases, and making it part of Apache Flink itself will be a great step for further growing this project and its community.


=== KIP Corner
As the counterpart to Flink‚Äôs FLIPs,  link:https://cwiki.apache.org/confluence/display/kafka/kafka+improvement+proposals[Kafka Improvement Proposals] , known as KIPs, are how the Apache Kafka community discusses and agrees on new functionality in Kafka.
This month we‚Äôve got three under discussion that caught our attention:

* link:https://cwiki.apache.org/confluence/display/KAFKA/KIP-1008%3A+ParKa+-+the+Marriage+of+Parquet+and+Kafka[KIP-1008: ParKa - the Marriage of Parquet and Kafka]  Imagine writing to your Kafka topics and them being directly queryable in your data lake‚Äîthat‚Äôs what this KIP would give you the potential to do. The idea is to have Kafka producers create log segments in the Apache Parquet file format and propagate those segments as-is to object store using special ingestion consumers. It remains to be seen how good of a fit Parquet is for Kafka logs, but with the continued rise of data lakes and the corresponding query engines, this is a highly interesting development worth keeping an eye on.
* link:https://cwiki.apache.org/confluence/display/KAFKA/KIP-939%3A+Support+Participation+in+2PC[KIP-939: Support Participation in 2PC]  Two-Phase Commit (2PC) is one of those architectural concepts that get some folk all hot-under-the-collar. Without it, there‚Äôs no way to guarantee  link:https://en.wikipedia.org/wiki/ACID[ACID semantics]  across multiple components of a distributed system, say Apache Kafka and a relational database. This KIP proposes to allow Kafka to participate in distributed transactions managed by an external coordinator, one use case being the integration into stream processing pipeline based on Apache Flink, with Flink being the transaction coordinator and ensuring exactly-once guarantees.
* The third one on our list is actually three üôÇ. It‚Äôs a set of KIPs all aimed at improving the ops experience with Kafka Connect: +
‚Ä¢ link:https://cwiki.apache.org/confluence/display/KAFKA/KIP-995%3A+Allow+users+to+specify+initial+offsets+while+creating+connectors[KIP-995: Allow users to specify initial offsets while creating connectors]  +
‚Ä¢  link:https://cwiki.apache.org/confluence/display/KAFKA/KIP-980%3A+Allow+creating+connectors+in+a+stopped+state[KIP-980: Allow creating connectors in a stopped state]  +
‚Ä¢  link:https://cwiki.apache.org/confluence/display/KAFKA/KIP-875%3A+First-class+offsets+support+in+Kafka+Connect[KIP-875: First-class offsets support in Kafka Connect]


=== Paper of the Month
üìÑ  link:https://link.springer.com/article/10.1007/s00778-023-00814-z[A Survey on Transactional Stream Processing]

Are transactional semantics the next big thing in stream processing?
While the jury still is out on this one, this paper by Shuhao Zhang et al.
provides an extensive overview on the current status quo of the space, discussing ‚Äúkey concepts, techniques, and challenges to be overcome, in order to ensure reliable and consistent data stream processing‚Äù.
With 29 pages overall, it‚Äôs a somewhat longer read, but it‚Äôs time well spent, providing insight into concepts, implementation approaches, and applications of transactional stream processing systems.


=== Events & Call for Papers (CfP)
* link:https://www.kafka-summit.org/events/kafka-summit-bangalore-2024/about[Kafka Summit Bengaluru]  *May 2* (CfP closes January 10th)
* link:https://www.databricks.com/dataaisummit/call-for-presentations/[Databricks DATA + AI Summit]  *June 10‚Äì13 (*CfP closes January 5th)
* link:https://sessionize.com/coceu-2024/[Community over Code EU]  [formerly ApacheCon EU] *June 3‚Äì5* (CfP closes January 12th)
* link:https://devoxxuk24.cfp.dev/#/login[Devoxx UK]  *May 8-10* (CfP closes January 12th)
* link:https://sessionize.com/ossna2024/[Open Source Summit NA]  *April 16‚Äì18* (CfP closes January 14th)

_Thanks to Floor at Aiven for sharing_ link:https://aiven.io/community/forum/t/call-for-papers-closing-soon/746[this useful conference list] _with us._


=== New Releases
* link:https://flink.apache.org/2023/11/29/apache-flink-1.17.2-release-announcement/[Apache Flink 1.17.2]
* link:https://flink.apache.org/2023/11/22/apache-flink-kubernetes-operator-1.7.0-release-announcement/[Apache Flink Kubernetes Operator 1.7.0]
* link:https://flink.apache.org/2023/10/27/apache-flink-kubernetes-operator-1.6.1-release-announcement/[Apache Flink Kubernetes Operator 1.6.1]
* link:https://downloads.apache.org/kafka/3.6.1/RELEASE_NOTES.html[Apache Kafka 3.6.1]
* link:https://downloads.apache.org/kafka/3.5.2/RELEASE_NOTES.html[Apache Kafka 3.5.2]
* link:https://debezium.io/releases/2.5/[Debezium 2.5.0.Beta1]



Phew, a jam-packed newsletter this month!
üòÖ We hope you‚Äôve enjoyed this edition, and are all-ears for any feedback or suggestions you‚Äôve got.
And to those who celebrate, Happy Holidays!



Gunnar ( link:https://de.linkedin.com/in/gunnar-morling-2b44b7229[LinkedIn]  /  link:https://twitter.com/gunnarmorling?lang=en[X]  /  link:https://mastodon.online/@gunnarmorling[Mastodon]  /  link:mailto:gunnar@decodable.co[Email] )

Robin ( link:https://www.linkedin.com/in/robinmoffatt[LinkedIn]  /  link:https://twitter.com/rmoff/[X]  /  link:https://data-folks.masto.host/@rmoff[Mastodon]  /  link:mailto:robin@decodable.co[Email] )