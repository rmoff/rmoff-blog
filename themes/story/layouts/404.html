{{ define "title" }}404 Not Found{{ end }}

{{ define "header" }}
<!-- No header on 404 - straight to terminal -->
{{ end }}

{{ define "main" }}

<div class="terminal-page">
    <!-- 404 ASCII art -->
    <div class="tc pv4">
        <pre class="terminal-404-text">  j88D   .d88b.    j88D      d8b   db  .d88b.  d888888b   d88888b  .d88b.  db    db d8b   db d8888b.
 j8~88  .8P  88.  j8~88      888o  88 .8P  Y8. `~~88~~'   88'     .8P  Y8. 88    88 888o  88 88  `8D
j8' 88  88  d'88 j8' 88      88V8o 88 88    88    88      88ooo   88    88 88    88 88V8o 88 88   88
V88888D 88 d' 88 V88888D     88 V8o88 88    88    88      88~~~   88    88 88    88 88 V8o88 88   88
    88  `88  d8'     88      88  V888 `8b  d8'    88      88      `8b  d8' 88b  d88 88  V888 88  .8D
    VP   `Y88P'      VP      VP   V8P  `Y88P'     YP      YP       `Y88P'  ~Y8888P' VP   V8P Y8888D'</pre>
    </div>

    <div class="terminal-content">
        <!-- Popular categories -->
        <div class="terminal-section">
            <span class="terminal-prompt">$ cat popular_categories.txt</span>
            <div class="terminal-output">
                {{- $topCats := slice }}
                {{- range $i, $term := .Site.Taxonomies.categories }}
                    {{- if lt $i 12 }}
                        {{- $topCats = $topCats | append (dict "name" $term.Page.Title "url" $term.Page.Permalink "count" (len $term.Pages)) }}
                    {{- end }}
                {{- end }}
                {{- range sort $topCats "count" "desc" | first 8 }}
                <a href="{{ .url }}" class="terminal-link">{{ .name }}</a>
                {{- end }}
            </div>
        </div>

        <!-- Recent posts -->
        <div class="terminal-section">
            <span class="terminal-prompt">$ tail -n5 posts.txt</span>
            <div class="terminal-output">
                {{- range first 5 (where .Site.RegularPages "Section" "ne" "slides") }}
                <a href="{{ .Permalink }}" class="terminal-link">{{ .Title }}</a>
                {{- end }}
            </div>
        </div>

        <!-- Go home -->
        <div class="terminal-section">
            <a href="{{ .Site.BaseURL }}" class="terminal-home-link">
                <span class="terminal-comment"># go home</span>
                <span class="terminal-prompt">$ cd ~</span>
            </a>
        </div>

        <div class="terminal-section">
            <span class="terminal-prompt">$ <span class="terminal-cursor-inline">_</span></span>
        </div>
    </div>
</div>

<style>
/* Override all backgrounds for 404 page - must beat body.bg-white specificity */
html, body, body.bg-white, main {
    background: #0a0a0a !important;
    background-color: #0a0a0a !important;
}

body {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

main {
    flex: 1;
    display: flex;
    flex-direction: column;
}

/* Full terminal page */
.terminal-page {
    background: #0a0a0a;
    flex: 1;
    padding: 0;
}

/* 404 ASCII text */
.terminal-404-text {
    font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
    font-size: 0.65rem;
    line-height: 1.15;
    color: #00ff00;
    background: transparent;
    margin: 0;
    padding: 1.5rem 2rem;
    text-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
    white-space: pre;
    display: inline-block;
}

/* Terminal content area */
.terminal-content {
    max-width: 800px;
    margin: 0 auto;
    padding: 1rem 2rem 3rem;
    font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
}

.terminal-section {
    margin-bottom: 1.5rem;
}

.terminal-prompt {
    color: #00ff00;
    font-size: 0.95rem;
    display: block;
    margin-bottom: 0.5rem;
}

.terminal-output {
    padding-left: 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.3rem;
}

.terminal-link {
    color: #4a9eff;
    text-decoration: none;
    font-size: 0.9rem;
    transition: color 0.15s ease;
}

.terminal-link:hover {
    color: #00ff00;
    text-decoration: underline;
}

.terminal-cursor-inline {
    animation: blink 1s step-end infinite;
}

@keyframes blink {
    50% { opacity: 0; }
}

/* Home link */
.terminal-home-link {
    display: block;
    text-decoration: none;
}

.terminal-home-link:hover .terminal-prompt,
.terminal-home-link:hover .terminal-comment {
    text-decoration: underline;
}

.terminal-comment {
    color: #666;
    font-size: 0.9rem;
    display: block;
}

/* Responsive */
@media (max-width: 700px) {
    .terminal-404-text {
        font-size: 0.4rem;
        padding: 1rem;
    }
    .terminal-content {
        padding: 1rem;
    }
}

@media (max-width: 450px) {
    .terminal-404-text {
        font-size: 0.3rem;
    }
}
</style>

{{ end }}
